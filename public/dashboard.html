<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>WD Dashboard</title>

    <style>
        body {
            margin: 0;
            padding: 0;
            background: #02040a;
            font-family: Arial, sans-serif;
            color: #d9e6ff;
        }

        @keyframes neonGlow {
            0% { box-shadow: 0 0 8px #0ff, 0 0 16px #00bfff; }
            50% { box-shadow: 0 0 16px #00bfff, 0 0 32px #0099ff; }
            100% { box-shadow: 0 0 8px #0ff, 0 0 16px #00bfff; }
        }

        /* HEADER CLEAN TANPA TEKS ANEH */
        .topbar {
            width: 100%;
            padding: 20px;
            background: #030712;
            border-bottom: 1px solid #0b5cff;
            color: #75aaff;
            font-size: 26px;
            text-align: center;
            letter-spacing: 1px;
            font-weight: bold;
            animation: neonGlow 2s infinite;
        }

        .cards {
            display: flex;
            gap: 20px;
            width: 90%;
            margin: 30px auto;
        }

        .card {
            flex: 1;
            padding: 20px;
            background: #0a0f1a;
            border: 1px solid #005eff;
            border-radius: 10px;
            box-shadow: 0 0 12px #003f88;
            animation: neonGlow 3s infinite;
        }

        .card h3 {
            margin: 0 0 12px 0;
            color: #4da6ff;
            font-size: 18px;
        }

        .card p {
            font-size: 22px;
            color: #e6f2ff;
        }

        .table-container {
            width: 90%;
            margin: 20px auto;
            background: #050814;
            border-radius: 12px;
            padding: 20px;
            border: 1px solid #0044ff;
            box-shadow: 0 0 20px #0044ff;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 15px;
        }

        th {
            background: #041024;
            padding: 14px;
            border-bottom: 1px solid #0033cc;
            color: #66b3ff;
        }

        td {
            padding: 14px;
            border-bottom: 1px solid #002266;
        }

        tr:hover {
            background: #001a33;
            cursor: pointer;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #7aa9ff;
        }

    </style>
</head>
<body>

<div class="topbar">WD DASHBOARD</div>

<div class="cards">
    <div class="card">
        <h3>Total WD</h3>
        <p id="sum-total">0</p>
    </div>
    <div class="card">
        <h3>Total Amount</h3>
        <p id="sum-amount">Rp 0</p>
    </div>
    <div class="card">
        <h3>Pending</h3>
        <p id="sum-pending">0</p>
    </div>
</div>

<div class="table-container">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>Username</th>
                <th>Bank</th>
                <th>Amount</th>
            </tr>
        </thead>
        <tbody id="list-container">
            <tr><td colspan="4" class="loading">Loading...</td></tr>
        </tbody>
    </table>
</div>

<script>
async function loadData() {
    try {
        const res = await fetch("/api/list", {
            headers: { "x-api-key": "kontolkecap12" }
        });

        const data = await res.json();
        const table = document.getElementById("list-container");
        table.innerHTML = "";

        let totalWD = data.length;
        let totalAmount = 0;
        let pending = data.length;

        data.forEach(row => {
            totalAmount += row.amount;

            table.innerHTML += `
                <tr>
                    <td>${row.id}</td>
                    <td>${row.username}</td>
                    <td>${row.bank}</td>
                    <td>Rp ${row.amount.toLocaleString()}</td>
                </tr>
            `;
        });

        document.getElementById("sum-total").innerText = totalWD;
        document.getElementById("sum-amount").innerText = "Rp " + totalAmount.toLocaleString();
        document.getElementById("sum-pending").innerText = pending;

    } catch (err) {
        document.getElementById("list-container").innerHTML =
            "<tr><td colspan='4' class='loading'>Gagal load data</td></tr>";
    }
}

loadData();
</script>

</body>
</html>
